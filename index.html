<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golden Yolk Market - Premium Eggs</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <a href="index.html" class="logo">
                    <i class="fas fa-egg"></i>
                    <span>Golden Yolk</span>
                </a>
                
                <div class="nav-links">
                    <a href="#home" class="nav-link">Home</a>
                    <a href="#products" class="nav-link">Products</a>
                    <a href="#about" class="nav-link">About</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </div>
                
                <div class="nav-actions">
                    <a href="cart.html" class="btn btn-secondary">
                        <i class="fas fa-shopping-cart"></i>
                        Cart <span class="cart-count">0</span>
                    </a>
                    
                    <!-- Auth Elements -->
                    <div class="auth-element">
                        <a href="login.html" class="btn btn-primary">Login</a>
                        <a href="register.html" class="btn btn-secondary">Register</a>
                    </div>
                    
                    <!-- User Elements -->
                    <div class="user-element" style="display: none;">
                        <div class="user-dropdown">
                            <span id="userDisplay"></span>
                            <div class="dropdown-content">
                                <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                                <a href="orders.html"><i class="fas fa-shopping-bag"></i> My Orders</a>
                                <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
                                <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Admin Link -->
                    <div class="admin-element" style="display: none;">
                        <a href="admin/dashboard.html" class="btn btn-warning">
                            <i class="fas fa-user-shield"></i>
                            Admin
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Fresh & Organic Eggs</h1>
                <p>Discover the finest selection of farm-fresh eggs, delivered directly from our local farms to your table</p>
                <a href="#products" class="btn btn-primary btn-large">
                    <i class="fas fa-shopping-basket"></i>
                    Shop Now
                </a>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="products-section">
        <div class="container">
            <h2>Our Premium Egg Selection</h2>
            <p style="text-align: center; color: var(--gray); margin-bottom: 2rem;">
                Carefully selected eggs from trusted local farms
            </p>
            
            <div class="products-filters">
                <button class="filter-btn active" data-filter="all">All Eggs</button>
                <button class="filter-btn" data-filter="organic">Organic</button>
                <button class="filter-btn" data-filter="free-range">Free Range</button>
                <button class="filter-btn" data-filter="premium">Premium</button>
                <button class="filter-btn" data-filter="brown">Brown Eggs</button>
            </div>
            
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded here dynamically -->
                <div class="loading-spinner" style="grid-column: 1 / -1;">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading products...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section" style="padding: 4rem 0; background: var(--primary-light);">
        <div class="container">
            <div style="text-align: center; max-width: 800px; margin: 0 auto;">
                <h2>About Golden Yolk Market</h2>
                <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem;">
                    Golden Yolk Market is your trusted source for the freshest, highest quality eggs 
                    from local farms. We believe in sustainable farming practices and ensuring that 
                    every egg that reaches your table is packed with nutrition and flavor.
                </p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin-top: 3rem;">
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                            <i class="fas fa-leaf" style="color: white; font-size: 2rem;"></i>
                        </div>
                        <h3>Organic & Natural</h3>
                        <p>100% organic feed, no antibiotics or hormones</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                            <i class="fas fa-truck" style="color: white; font-size: 2rem;"></i>
                        </div>
                        <h3>Fast Delivery</h3>
                        <p>Fresh delivery within 24 hours of ordering</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                            <i class="fas fa-award" style="color: white; font-size: 2rem;"></i>
                        </div>
                        <h3>Premium Quality</h3>
                        <p>Grade AA eggs from happy, healthy chickens</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" style="padding: 4rem 0;">
        <div class="container">
            <div style="text-align: center; max-width: 600px; margin: 0 auto;">
                <h2>Contact Us</h2>
                <p style="color: var(--gray); margin-bottom: 2rem;">
                    Have questions? We'd love to hear from you
                </p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                    <div style="text-align: center;">
                        <i class="fas fa-map-marker-alt" style="color: var(--primary); font-size: 2rem; margin-bottom: 1rem;"></i>
                        <h3>Visit Us</h3>
                        <p>Biga-a San Pablo, Naval, Biliran</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="fas fa-phone" style="color: var(--primary); font-size: 2rem; margin-bottom: 1rem;"></i>
                        <h3>Call Us</h3>
                        <p>+63 035 240 6623</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="fas fa-envelope" style="color: var(--primary); font-size: 2rem; margin-bottom: 1rem;"></i>
                        <h3>Email Us</h3>
                        <p>contact@goldenyolk.com</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Golden Yolk Market</h3>
                    <p>Your trusted source for fresh, organic eggs from local farms.</p>
                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <a href="#" style="color: #d1d5db; font-size: 1.5rem;"><i class="fab fa-facebook"></i></a>
                        <a href="#" style="color: #d1d5db; font-size: 1.5rem;"><i class="fab fa-instagram"></i></a>
                        <a href="#" style="color: #d1d5db; font-size: 1.5rem;"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <p><a href="#home" style="color: #d1d5db; text-decoration: none;">Home</a></p>
                    <p><a href="#products" style="color: #d1d5db; text-decoration: none;">Products</a></p>
                    <p><a href="#about" style="color: #d1d5db; text-decoration: none;">About Us</a></p>
                    <p><a href="#contact" style="color: #d1d5db; text-decoration: none;">Contact</a></p>
                </div>
                <div class="footer-section">
                    <h3>Customer Service</h3>
                    <p><a href="login.html" style="color: #d1d5db; text-decoration: none;">My Account</a></p>
                    <p><a href="orders.html" style="color: #d1d5db; text-decoration: none;">Order Tracking</a></p>
                    <p><a href="#" style="color: #d1d5db; text-decoration: none;">Shipping Info</a></p>
                    <p><a href="#" style="color: #d1d5db; text-decoration: none;">FAQ</a></p>
                </div>
                <div class="footer-section">
                    <h3>Newsletter</h3>
                    <p>Subscribe to get special offers and farm updates</p>
                    <div style="display: flex; margin-top: 1rem;">
                        <input type="email" placeholder="Your email" style="flex: 1; padding: 0.75rem; border: none; border-radius: 0.5rem 0 0 0.5rem;">
                        <button class="btn btn-primary" style="border-radius: 0 0.5rem 0.5rem 0;">Subscribe</button>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #374151;">
                <p>&copy; 2024 Golden Yolk Market. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script> <!-- Add this -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script> <!-- If needed -->

<!-- Your config -->
<script src="js/firebase/config.js"></script>

<!-- Your scripts (in correct order) -->
<script src="js/utils/helpers.js"></script>
<script src="js/auth/auth.js"></script>
<script src="js/products/products.js"></script> <!-- Products loads after Firebase -->
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize cart count
            if (authManager.getCurrentUser()) {
                productsManager.updateCartCount();
            }
            
            // Logout handler
            document.getElementById('logoutBtn')?.addEventListener('click', async function(e) {
                e.preventDefault();
                const result = await authManager.signOut();
                if (result.success) {
                    window.location.href = 'index.html';
                }
            });

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Add some sample products if database is empty (for demo)
            setTimeout(() => {
                const productsGrid = document.getElementById('productsGrid');
                if (productsGrid.innerHTML.includes('Loading products')) {
                    // Show demo products if none loaded
                    productsGrid.innerHTML = `
                        <div class="product-card">
                            <img src="https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8ZWdnc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60" 
                                 alt="Organic Free-Range Eggs" 
                                 class="product-image">
                            <div class="product-info">
                                <h3 class="product-name">Organic Free-Range Eggs</h3>
                                <p class="product-description">Fresh organic eggs from happy free-range chickens. Rich in omega-3 and vitamins.</p>
                                <div class="product-meta">
                                    <span class="product-category">Organic</span>
                                    <span class="product-stock">25 in stock</span>
                                </div>
                                <div class="product-price">₱180.00</div>
                                <div class="product-actions">
                                    <button class="btn btn-primary add-to-cart" data-product-id="1">
                                        <i class="fas fa-cart-plus"></i>
                                        Add to Cart
                                    </button>
                                    <button class="btn btn-outline quick-view" data-product-id="1">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="product-card">
                            <img src="https://images.unsplash.com/photo-1568401442864-65444997c356?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8ZWdnc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60" 
                                 alt="Premium Brown Eggs" 
                                 class="product-image">
                            <div class="product-info">
                                <h3 class="product-name">Premium Brown Eggs</h3>
                                <p class="product-description">Large brown eggs with deep golden yolks. Perfect for baking and cooking.</p>
                                <div class="product-meta">
                                    <span class="product-category">Premium</span>
                                    <span class="product-stock">18 in stock</span>
                                </div>
                                <div class="product-price">₱220.00</div>
                                <div class="product-actions">
                                    <button class="btn btn-primary add-to-cart" data-product-id="2">
                                        <i class="fas fa-cart-plus"></i>
                                        Add to Cart
                                    </button>
                                    <button class="btn btn-outline quick-view" data-product-id="2">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="product-card">
                            <img src="https://images.unsplash.com/photo-1587334274328-64186a3a6d72?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8ZWdnc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60" 
                                 alt="Free Range Chicken Eggs" 
                                 class="product-image">
                            <div class="product-info">
                                <h3 class="product-name">Free Range Chicken Eggs</h3>
                                <p class="product-description">Eggs from chickens that roam freely outdoors. Natural diet, superior taste.</p>
                                <div class="product-meta">
                                    <span class="product-category">Free Range</span>
                                    <span class="product-stock low-stock">8 in stock</span>
                                </div>
                                <div class="product-price">₱160.00</div>
                                <div class="product-actions">
                                    <button class="btn btn-primary add-to-cart" data-product-id="3">
                                        <i class="fas fa-cart-plus"></i>
                                        Add to Cart
                                    </button>
                                    <button class="btn btn-outline quick-view" data-product-id="3">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="product-card">
                            <img src="https://images.unsplash.com/photo-1518977676601-b53f82aba655?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8ZWdnc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60" 
                                 alt="Quail Eggs" 
                                 class="product-image">
                            <div class="product-info">
                                <h3 class="product-name">Fresh Quail Eggs</h3>
                                <p class="product-description">Delicate and nutritious quail eggs. Perfect for appetizers and gourmet dishes.</p>
                                <div class="product-meta">
                                    <span class="product-category">Specialty</span>
                                    <span class="product-stock">30 in stock</span>
                                </div>
                                <div class="product-price">₱120.00</div>
                                <div class="product-actions">
                                    <button class="btn btn-primary add-to-cart" data-product-id="4">
                                        <i class="fas fa-cart-plus"></i>
                                        Add to Cart
                                    </button>
                                    <button class="btn btn-outline quick-view" data-product-id="4">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;

                    // Re-attach event listeners for demo products
                    document.querySelectorAll('.add-to-cart').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const productId = e.target.closest('button').dataset.productId;
                            if (!authManager.getCurrentUser()) {
                                productsManager.showMessage('Please login to add items to cart', 'warning');
                                setTimeout(() => {
                                    window.location.href = 'login.html';
                                }, 1500);
                                return;
                            }
                            productsManager.showMessage('Product added to cart!', 'success');
                            // Update cart count
                            const cartCount = document.querySelector('.cart-count');
                            if (cartCount) {
                                const currentCount = parseInt(cartCount.textContent) || 0;
                                cartCount.textContent = currentCount + 1;
                            }
                        });
                    });

                    document.querySelectorAll('.quick-view').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const productId = e.target.closest('button').dataset.productId;
                            productsManager.showQuickView(productId);
                        });
                    });
                }
            }, 2000);
        });
    </script>
</body>
</html>